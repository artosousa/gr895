---
const response = await fetch('https://api-web.nhle.com/v1/player/8479318/landing')
const data = await response.json()
const {teamLogo} = data
const {goals} = data.featuredStats.regularSeason.subSeason
const name = `${data.firstName.default} ${data.lastName.default}` 
const {gamesPlayed} = data.featuredStats.regularSeason.subSeason
const {heroImage} = data
const {headshot} = data
const fullSeason = 81
const goalPace = Math.round((goals / gamesPlayed) * 81)
---

<html lang="en">
	<head>
		<!-- Google tag (gtag.js) -->
		<script type="text/partytown" async src="https://www.googletagmanager.com/gtag/js?id=G-DN9KK1YW8K"></script>
		<script type="text/partytown">
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
	
			gtag('config', 'G-DN9KK1YW8K');
		</script>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href={teamLogo} />
		<link rel="stylesheet" href="https://use.typekit.net/yke1otl.css">
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<meta property="og:image" content=`http://34to70.com/OG.png`>
		<meta property="og:image:width" content="1200">
		<meta property="og:image:height" content="630">
		<meta property="og:description" content=`${name} has got ${goals} in ${gamesPlayed}! On pace for ${goalPace} this season!`>
		<meta property="og:title" content=`${name} road to 70. Only ${70 - goals} to go! `>
		<meta name="description" content=`${name} has got ${goals} in ${gamesPlayed}! On pace for ${goalPace} this season!`>
		<meta property="og:url" content="https://example.com/page-url">
		<meta property="og:type" content="website">
		<title>34 to 70</title>
	</head>
	<body class="bg-[#00205b] sm:p-1">

		<div class=" fixed -z-10 top-0 left-0 w-full h-screen mix-blend-luminosity opacity-5 flex items-center justify-center">
			<img title="AM34 Hero Shot" alt="Hero img" src={heroImage} class="object-cover h-[100%] w-[100%]" />
		</div>
		<div class="flex flex-col min-h-[95vh] items-center justify-center">
			<div class="mb-8 relative">
				<div class="rounded-full overflow-hidden bg-white border-solid border-2 border-white ">
					<img class="w-32 h-32" title=`${name} headshot` alt="headshot" src={headshot} />
				</div>
				<div class="rounded-full right-0 bottom-0 overflow-hidden bg-white border-solid border-2 border-[#00205b] absolute">
					<img class="w-9 h-9 " title=`TML Logo` alt="logo" src={teamLogo} />
				</div>
			</div>
			<h2 class="text-3xl lg:text-5xl  text-center text-white font-bold">
				{ goals < 70 ? `${name} has ${goals} goals in ${gamesPlayed} games!` : `${name} has a total of`}
			</h2>
			<h1 class="text-[15rem] text-white font-bold leading-[0.85] mt-8">{goals < 70 ? 70 - goals: goals}</h1>
			<h2 class="text-3xl lg:text-5xl text-center text-white font-bold mb-8">{ goals < 70 ? `Until 70! ` : `goals in ${gamesPlayed} games.`}</h2>
			<h2 class="text-3xl lg:text-5xl text-center text-white font-bold mt-4 ">{ goals < 70 ? `${fullSeason - gamesPlayed} games remaining. On pace for ${goalPace} goals.` : null}</h2>
			<div class="font-mono text-white mt-5 mb-1 bottom-0 ">Created by <a class="text-white" href='https://arthursousa.com' title="Arthur Sousa" target="_blank">arthursousa.com</a></div>
		</div>
		
	</body>
</html>
